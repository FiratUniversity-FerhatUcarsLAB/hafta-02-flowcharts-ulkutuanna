digraph TahlilSistemi_Guncel {
    rankdir=TB;
    node [shape=box, fontname="Arial"];
    
    // Başlangıç ve Bitiş
    Basla [shape=oval, label="BAŞLA"];
    Bitir [shape=oval, label="BİTİR"];
    
    // 1. Kimlik Doğrulama Döngüsü
    GirisDongusu [shape=box, label="DÖNGÜ: Deneme < 3"];
    KimlikDogrulama [shape=parallelogram, label="OKU Kimlik No, Şifre"];
    GirisKontrol [shape=diamond, label="Kimlik Doğrulama\nBaşarılı mı?"];
    GirisBasarili [shape=box, label="GİRİŞ BAŞARILI"];
    GirisBasarisiz [shape=box, label="HAKKI_AZALT"];
    HesapBloke [shape=box, label="HESAP BLOKE EDİLDİ"];

    // 2. Tahlil Seçim ve Kontrol Döngüsü
    TahlilSecimDongusu [shape=box, label="DÖNGÜ: İşlem Yapılıyor mu?"];
    TahlilSecim [shape=parallelogram, label="OKU Seçilen Tahlil ID"];
    TahlilMevcut [shape=diamond, label="Tahlil Mevcut mu?"];
    TahlilHazir [shape=diamond, label="Sonuç Hazır mı?"];
    
    // İşlem Düğümleri
    SonucGoster [shape=box, label="TAHLİL SONUCU GÖRÜNTÜLE"];
    BeklemeMesaji [shape=box, label="YAZ 'Sonuç hazır değil.'"];
    
    // PDF İndirme ve Bitiş
    PdfSoru [shape=parallelogram, label="OKU İNDİRME KOMUTU"];
    PdfKontrol [shape=diamond, label="İndir Komutu mu?"];
    PdfIndir [shape=box, label="PDF İNDİR"];
    IslemTamam [shape=box, label="İŞLEM TAMAMLANDI"];

    // Akış Bağlantıları
    Basla -> GirisDongusu;
    GirisDongusu -> KimlikDogrulama;
    KimlikDogrulama -> GirisKontrol;
    
    GirisKontrol -> GirisBasarili [label="EVET"];
    GirisKontrol -> GirisBasarisiz [label="HAYIR"];
    GirisBasarisiz -> GirisDongusu;
    GirisDongusu -> HesapBloke [label="3 deneme sonrası"];
    HesapBloke -> Bitir;
    
    GirisBasarili -> TahlilSecimDongusu;
    TahlilSecimDongusu -> TahlilSecim;
    TahlilSecim -> TahlilMevcut;
    
    TahlilMevcut -> TahlilHazir [label="EVET"];
    TahlilMevcut -> TahlilSecimDongusu [label="HAYIR"];
    
    TahlilHazir -> SonucGoster [label="EVET"];
    TahlilHazir -> BeklemeMesaji [label="HAYIR"];
    
    SonucGoster -> PdfSoru;
    PdfSoru -> PdfKontrol;
    PdfKontrol -> PdfIndir [label="EVET"];
    PdfKontrol -> IslemTamam [label="HAYIR"];
    
    BeklemeMesaji -> Bitir;
    PdfIndir -> Bitir;
    IslemTamam -> Bitir;
}
